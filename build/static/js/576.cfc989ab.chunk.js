"use strict";(self.webpackChunksunbeth_portal_react_ts=self.webpackChunksunbeth_portal_react_ts||[]).push([[576],{9576:(e,a,s)=>{s.r(a),s.d(a,{default:()=>o});var t=s(2555),l=s(5043),i=s(5475),n=s(8558),d=s(3301),r=s(579);function o(){var e,a,s,o,c,m;const[h,p]=(0,l.useState)(()=>{try{return localStorage.getItem("sunbeth_superadmin_email")||""}catch(e){return""}}),[g,u]=(0,l.useState)([]),[y,x]=(0,l.useState)(null),[v,j]=(0,l.useState)([]),[f,b]=(0,l.useState)([]),[N,w]=(0,l.useState)({}),[C,A]=(0,l.useState)([]),[k,S]=(0,l.useState)(""),[T,_]=(0,l.useState)(!1),[I,E]=(0,l.useState)([]),[R,W]=(0,l.useState)(null),[P,O]=(0,l.useState)({}),[B,U]=(0,l.useState)({darkMode:!0}),[L,M]=(0,l.useState)(""),[D,F]=(0,l.useState)(""),[J,G]=(0,l.useState)(""),[q,z]=(0,l.useState)(!1),[V,$]=(0,l.useState)(null),[H,K]=(0,l.useState)([]),[Q,X]=(0,l.useState)(""),[Y,Z]=(0,l.useState)("SuperAdmin"),[ee,ae]=(0,l.useState)({}),[se,te]=(0,l.useState)({}),[le,ie]=(0,l.useState)({}),[ne,de]=(0,l.useState)(""),re=(0,d.ec)(),oe=(0,n.Gi)()||"",ce=e=>{const a="".concat(oe).concat(e);return h?a+(a.includes("?")?"&adminEmail=".concat(encodeURIComponent(h)):"?adminEmail=".concat(encodeURIComponent(h))):a},me=async e=>{$(null),b([]);try{const a=await fetch(ce("/api/admin/tenants/".concat(e,"/domains"))),s=await a.json();b(Array.isArray(null===s||void 0===s?void 0:s.domains)?s.domains:[])}catch(a){$("Failed to load domains")}},he=async e=>{$(null),w({});try{const a=await fetch(ce("/api/admin/tenants/".concat(e,"/theme"))),s=await a.json();w(s&&s.theme?s.theme:{})}catch(a){w({})}},pe=async()=>{try{const e=await fetch(ce("/api/admin/themes")),a=await e.json();E(Array.isArray(null===a||void 0===a?void 0:a.themes)?a.themes:[])}catch(e){}},ge=async()=>{try{const e=await fetch(ce("/api/admin/roles")),a=await e.json();K(Array.isArray(null===a||void 0===a?void 0:a.users)?a.users:[])}catch(e){}},ue=[{key:"ff_workflows_enabled",label:"Workflows/Approvals"},{key:"ff_analytics_v2",label:"Analytics v2"},{key:"ff_external_users",label:"External Users"},{key:"ff_extensions_marketplace",label:"Extensions Marketplace"},{key:"ff_document_e_signature",label:"Document e-signature"}],ye=async e=>{try{const a=await fetch(ce("/api/admin/themes/".concat(e))),s=await a.json();W(e),M(s.name||""),O(s.light||{}),U(s.dark||{darkMode:!0})}catch(a){}},xe=async e=>{if(null!=R)try{const a="tenant"===e?String(y):"module"===e?D:"plugin"===e?J:null,s={themeId:R,targetType:e,targetId:a};await fetch(ce("/api/admin/theme-assignments"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),null!=y&&await he(y)}catch(a){}};(0,l.useEffect)(()=>{(async()=>{z(!0),$(null);try{const e=await fetch(ce("/api/admin/tenants")),a=await e.json();u(Array.isArray(null===a||void 0===a?void 0:a.tenants)?a.tenants:[])}catch(e){$("Failed to load tenants")}finally{z(!1)}})()},[]),(0,l.useEffect)(()=>{null!=y&&((async e=>{$(null),j([]);try{const a=await fetch(ce("/api/admin/tenants/".concat(e,"/modules"))),s=await a.json();j(Array.isArray(null===s||void 0===s?void 0:s.modules)?s.modules:[])}catch(a){$("Failed to load tenant modules")}})(y),me(y),he(y),(async e=>{$(null),A([]);try{const a=await fetch(ce("/api/admin/customization-requests?tenantId=".concat(e))),s=await a.json();A(Array.isArray(null===s||void 0===s?void 0:s.requests)?s.requests:[])}catch(a){}})(y),(async e=>{try{const a=await fetch(ce("/api/admin/tenants/".concat(e,"/feature-flags"))),s=await a.json();ie((null===s||void 0===s?void 0:s.flags)||{})}catch(a){}})(y))},[y]),(0,l.useEffect)(()=>{pe(),ge(),(async()=>{try{const e=await fetch(ce("/api/admin/settings")),a=await e.json();ae((null===a||void 0===a?void 0:a.settings)||{})}catch(e){}})(),(async()=>{try{const e=await fetch(ce("/api/admin/feature-flags")),a=await e.json();te((null===a||void 0===a?void 0:a.flags)||{})}catch(e){}})()},[]);const ve=(null===N||void 0===N||null===(e=N.colors)||void 0===e?void 0:e.primary)||"",je=(null===N||void 0===N||null===(a=N.colors)||void 0===a?void 0:a.accent)||"",fe=(0,l.useMemo)(()=>({display:"inline-flex",gap:8,alignItems:"center",padding:8,border:"1px solid #eee",borderRadius:8}),[]);return re.canSeeAdmin?(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Super Admin Console"}),(0,r.jsx)("div",{className:"card",style:{padding:12,marginBottom:12},children:(0,r.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,r.jsxs)("label",{className:"small",title:"Used to authorize admin API calls without env changes",children:["Super Admin Email",(0,r.jsx)("input",{type:"email",placeholder:"admin@example.com",value:h,onChange:e=>{const a=e.target.value;p(a);try{localStorage.setItem("sunbeth_superadmin_email",a)}catch(s){}},style:{marginLeft:8,padding:8,borderRadius:6,border:"1px solid #e6e6e6",minWidth:260}})]}),(0,r.jsxs)("div",{className:"small muted",children:["This value is appended as ",(0,r.jsx)("code",{children:"adminEmail"})," to admin API calls."]})]})}),(0,r.jsxs)("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:16},children:[(0,r.jsxs)("div",{className:"card",style:{padding:12},children:[(0,r.jsx)("div",{style:{fontWeight:700,marginBottom:10},children:"Global Settings"}),(0,r.jsxs)("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,r.jsxs)("label",{className:"small",title:"Enable external users / MFA / password reset endpoints",children:["External Support Enabled",(0,r.jsx)("input",{type:"checkbox",checked:!!ee.external_support_enabled,onChange:e=>ae(a=>(0,t.A)((0,t.A)({},a),{},{external_support_enabled:e.target.checked})),style:{marginLeft:8}})]}),(0,r.jsxs)("label",{className:"small",title:"Comma-separated list of allowed origins for CORS (e.g., http://localhost:3000,https://portal.example.com)",children:["Allowed Origins",(0,r.jsx)("input",{value:ee.allowed_origins||"",onChange:e=>ae(a=>(0,t.A)((0,t.A)({},a),{},{allowed_origins:e.target.value})),placeholder:"http://localhost:3000",style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #e6e6e6"}})]}),(0,r.jsxs)("label",{className:"small",title:"If set, supports CODE.baseDomain routing when subdomains are enabled",children:["Tenant Base Domain",(0,r.jsx)("input",{value:ee.tenant_base_domain||"",onChange:e=>ae(a=>(0,t.A)((0,t.A)({},a),{},{tenant_base_domain:e.target.value})),placeholder:"local.test",style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #e6e6e6"}})]}),(0,r.jsxs)("label",{className:"small",children:["Subdomain Routing Enabled",(0,r.jsx)("input",{type:"checkbox",checked:!!ee.tenant_subdomain_enabled,onChange:e=>ae(a=>(0,t.A)((0,t.A)({},a),{},{tenant_subdomain_enabled:e.target.checked})),style:{marginLeft:8}})]}),(0,r.jsxs)("label",{className:"small",title:"Base URL used in onboarding links when origin is not available",children:["Frontend Base URL",(0,r.jsx)("input",{value:ee.frontend_base_url||"",onChange:e=>ae(a=>(0,t.A)((0,t.A)({},a),{},{frontend_base_url:e.target.value})),placeholder:"https://portal.example.com",style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #e6e6e6"}})]})]}),(0,r.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:12},children:(0,r.jsx)("button",{className:"btn sm",onClick:async()=>{try{await fetch(ce("/api/admin/settings"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:ee})})}catch(e){}},children:"Save Settings"})})]}),(0,r.jsxs)("div",{className:"card",style:{padding:12},children:[(0,r.jsx)("div",{style:{fontWeight:700,marginBottom:10},children:"Roles"}),(0,r.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:10},children:[(0,r.jsx)("input",{type:"email",placeholder:"user@example.com",value:Q,onChange:e=>X(e.target.value),style:{flex:1,padding:8,borderRadius:6,border:"1px solid #e6e6e6"}}),(0,r.jsxs)("select",{value:Y,onChange:e=>Z(e.target.value),style:{padding:8,borderRadius:6,border:"1px solid #e6e6e6"},children:[(0,r.jsx)("option",{value:"SuperAdmin",children:"SuperAdmin"}),(0,r.jsx)("option",{value:"Admin",children:"Admin"}),(0,r.jsx)("option",{value:"Manager",children:"Manager"})]}),(0,r.jsx)("button",{className:"btn sm",onClick:async()=>{const e=Q.trim().toLowerCase();if(e&&Y)try{await fetch(ce("/api/admin/roles"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,role:Y})}),X(""),await ge()}catch(a){}},disabled:!Q.trim(),children:"Add"})]}),(0,r.jsx)("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:12},children:H.map(e=>(0,r.jsxs)("div",{className:"card",style:{padding:10},children:[(0,r.jsx)("div",{style:{fontWeight:700},children:e.email}),(0,r.jsx)("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginTop:8},children:e.roles.map(a=>(0,r.jsxs)("span",{className:"badge",style:{display:"inline-flex",gap:6,alignItems:"center"},children:[a,(0,r.jsx)("button",{className:"btn ghost xs",onClick:()=>(async(e,a)=>{try{await fetch(ce("/api/admin/roles?email=".concat(encodeURIComponent(e),"&role=").concat(encodeURIComponent(a))),{method:"DELETE"}),await ge()}catch(s){}})(e.email,a),title:"Remove role",children:"\xd7"})]},a))})]},e.email))})]})]}),(0,r.jsxs)("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:16},children:[(0,r.jsxs)("div",{className:"card",style:{padding:12},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)("div",{style:{fontWeight:700},children:"Global Feature Flags"}),(0,r.jsx)("button",{className:"btn sm",onClick:async()=>{try{await fetch(ce("/api/admin/feature-flags"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({flags:se})})}catch(e){}},children:"Save"})]}),(0,r.jsx)("div",{style:{display:"grid",gap:8,marginTop:10},children:ue.map(e=>(0,r.jsxs)("label",{className:"small",style:{display:"flex",alignItems:"center",gap:8},children:[(0,r.jsx)("input",{type:"checkbox",checked:!!se[e.key],onChange:a=>te(s=>(0,t.A)((0,t.A)({},s),{},{[e.key]:a.target.checked}))})," ",e.label,(0,r.jsxs)("span",{className:"small muted",children:["(",e.key,")"]})]},e.key))}),(0,r.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",marginTop:12},children:[(0,r.jsx)("input",{placeholder:"ff_custom_flag",value:ne,onChange:e=>de(e.target.value),style:{flex:1,padding:8,borderRadius:6,border:"1px solid #e6e6e6"}}),(0,r.jsx)("button",{className:"btn ghost sm",onClick:()=>{const e=ne.trim();/^ff_[a-z0-9._-]+$/i.test(e)&&(te(a=>(0,t.A)((0,t.A)({},a),{},{[e]:!0})),de(""))},children:"Add Flag"})]})]}),(0,r.jsxs)("div",{className:"card",style:{padding:12},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)("div",{style:{fontWeight:700},children:"Tenant Feature Flags"}),(0,r.jsx)("button",{className:"btn sm",onClick:async()=>{if(null!=y)try{await fetch(ce("/api/admin/tenants/".concat(y,"/feature-flags")),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({flags:le})})}catch(e){}},disabled:null==y,children:"Save"})]}),null==y?(0,r.jsx)("div",{className:"small muted",style:{marginTop:10},children:"Select a tenant to view and override flags."}):(0,r.jsx)("div",{style:{display:"grid",gap:8,marginTop:10},children:ue.map(e=>(0,r.jsxs)("label",{className:"small",style:{display:"flex",alignItems:"center",gap:8},children:[(0,r.jsx)("input",{type:"checkbox",checked:!!le[e.key],onChange:a=>ie(s=>(0,t.A)((0,t.A)({},s),{},{[e.key]:a.target.checked}))})," ",e.label,(0,r.jsxs)("span",{className:"small muted",children:["(",e.key,")"]})]},e.key))})]})]}),(0,r.jsxs)("div",{className:"grid",style:{gridTemplateColumns:"280px 1fr",gap:16},children:[(0,r.jsxs)("div",{className:"card",style:{padding:12},children:[(0,r.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"Tenants"}),q&&(0,r.jsx)("div",{className:"small muted",children:"Loading\u2026"}),V&&(0,r.jsx)("div",{className:"small",style:{color:"crimson"},children:V}),(0,r.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0},children:g.map(e=>(0,r.jsxs)("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 4px",borderBottom:"1px solid #eee",cursor:"pointer",background:y===e.id?"#f5f5f5":void 0},onClick:()=>x(e.id),children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{style:{fontWeight:600},children:[e.name," ",e.isOwner&&(0,r.jsx)("span",{className:"small muted",title:"Owner",children:"(Owner)"})]}),(0,r.jsx)("div",{className:"small muted",children:e.code})]}),(0,r.jsxs)("div",{className:"small muted",title:"Enabled modules",children:[e.modulesEnabled," mods"]})]},e.id))})]}),(0,r.jsx)("div",{children:null==y?(0,r.jsx)("div",{className:"small muted",children:"Select a tenant to manage entitlements."}):(0,r.jsxs)("div",{style:{display:"grid",gap:16},children:[(0,r.jsxs)("div",{className:"card",style:{padding:12},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)("div",{style:{fontWeight:700},children:"Modules"}),(0,r.jsx)(i.N_,{to:"/admin",className:"btn ghost sm",children:"Global Admin"})]}),(0,r.jsx)("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:16,marginTop:12},children:v.map(e=>(0,r.jsxs)("div",{className:"card",style:{padding:12},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[(0,r.jsx)("div",{style:{fontWeight:700},children:e.title}),(0,r.jsxs)("div",{className:"small muted",children:["v",e.version]})]}),(0,r.jsx)("div",{className:"small muted",style:{margin:"4px 0 10px 0"},children:e.name}),(0,r.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,r.jsxs)("label",{className:"small",style:{display:"flex",alignItems:"center",gap:6},children:[(0,r.jsx)("input",{type:"checkbox",checked:!!e.enabled,onChange:a=>(async(e,a)=>{if(null!=y)try{if(!(await fetch(ce("/api/admin/tenants/".concat(y,"/modules")),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({module:e.name,enabled:a})})).ok)throw new Error("save_failed");j(s=>s.map(s=>s.name===e.name?(0,t.A)((0,t.A)({},s),{},{enabled:a}):s))}catch(s){$("Failed to save")}})(e,a.target.checked)}),(0,r.jsx)("span",{children:e.enabled?"Enabled":"Disabled"})]}),(0,r.jsx)(i.N_,{to:e.adminRoute,className:"btn ghost sm",children:"Admin"})]})]},e.name))})]}),(0,r.jsxs)("div",{className:"card",style:{padding:12},children:[(0,r.jsx)("div",{style:{fontWeight:700,marginBottom:10},children:"Custom Domains"}),(0,r.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:10},children:[(0,r.jsx)("input",{placeholder:"tenant.example.com",value:k,onChange:e=>S(e.target.value),style:{flex:1,padding:8,borderRadius:6,border:"1px solid #e6e6e6"}}),(0,r.jsxs)("label",{className:"small",style:{display:"flex",alignItems:"center",gap:6},children:[(0,r.jsx)("input",{type:"checkbox",checked:T,onChange:e=>_(e.target.checked)})," Primary"]}),(0,r.jsx)("button",{className:"btn sm",onClick:async()=>{if(null!=y&&k.trim())try{if(!(await fetch(ce("/api/admin/tenants/".concat(y,"/domains")),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:k.trim(),isPrimary:!!T})})).ok)throw new Error("create_failed");S(""),_(!1),await me(y)}catch(e){$("Failed to add domain")}},disabled:!k.trim(),children:"Add"})]}),(0,r.jsx)("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:12},children:f.map(e=>(0,r.jsx)("div",{className:"card",style:{padding:10},children:(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{style:{fontWeight:700},children:[e.domain," ",e.isPrimary&&(0,r.jsx)("span",{className:"badge done",style:{marginLeft:6},children:"Primary"})]}),(0,r.jsx)("div",{className:"small muted",children:e.verified?"Verified":"Unverified"})]}),(0,r.jsx)("button",{className:"btn ghost sm",onClick:()=>(async e=>{if(null!=y)try{if(!(await fetch(ce("/api/admin/tenants/".concat(y,"/domains/").concat(e)),{method:"DELETE"})).ok)throw new Error("delete_failed");await me(y)}catch(a){$("Failed to delete domain")}})(e.id),children:"Delete"})]})},e.id))}),(0,r.jsx)("div",{className:"small muted",style:{marginTop:8},children:"Note: Verification and SSL automation will be added in a later step."})]}),(0,r.jsxs)("div",{className:"card",style:{padding:12},children:[(0,r.jsx)("div",{style:{fontWeight:700,marginBottom:10},children:"Theme"}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:12},children:[(0,r.jsxs)("label",{className:"small",children:["Primary Color",(0,r.jsx)("input",{type:"text",placeholder:"#0b5fff",value:ve,onChange:e=>{return a=e.target.value,w(e=>(0,t.A)((0,t.A)({},e),{},{colors:(0,t.A)((0,t.A)({},e.colors||{}),{},{primary:a||void 0})}));var a},style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #e6e6e6"}})]}),(0,r.jsxs)("label",{className:"small",children:["Accent Color",(0,r.jsx)("input",{type:"text",placeholder:"#ff5a0b",value:je,onChange:e=>{return a=e.target.value,w(e=>(0,t.A)((0,t.A)({},e),{},{colors:(0,t.A)((0,t.A)({},e.colors||{}),{},{accent:a||void 0})}));var a},style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #e6e6e6"}})]}),(0,r.jsxs)("label",{className:"small",children:["Logo URL",(0,r.jsx)("input",{type:"text",placeholder:"/images/logo.svg",value:(null===N||void 0===N?void 0:N.logoUrl)||"",onChange:e=>{return a=e.target.value,w(e=>(0,t.A)((0,t.A)({},e),{},{logoUrl:a||void 0}));var a},style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #e6e6e6"}})]})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center",marginTop:10},children:[(0,r.jsxs)("label",{className:"small",style:{display:"flex",alignItems:"center",gap:6},children:[(0,r.jsx)("input",{type:"checkbox",checked:!!N.darkMode,onChange:e=>{return a=e.target.checked,w(e=>(0,t.A)((0,t.A)({},e),{},{darkMode:a}));var a}})," Dark mode"]}),(0,r.jsxs)("div",{style:fe,children:[(0,r.jsx)("span",{className:"small muted",children:"Preview:"}),(0,r.jsx)("span",{className:"badge",style:{background:ve||"var(--primary)",color:"#fff"},children:"Primary"}),(0,r.jsx)("span",{className:"badge",style:{background:je||"var(--accent)",color:"#fff"},children:"Accent"})]}),(0,r.jsx)("div",{className:"spacer"}),(0,r.jsx)("button",{className:"btn sm",onClick:async()=>{if(null!=y)try{if(!(await fetch(ce("/api/admin/tenants/".concat(y,"/theme")),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({theme:N})})).ok)throw new Error("save_failed")}catch(e){$("Failed to save theme")}},children:"Save Theme"})]})]}),(0,r.jsxs)("div",{className:"card",style:{padding:12},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)("div",{style:{fontWeight:700},children:"Theme Library & Assignments"}),(0,r.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,r.jsx)("button",{className:"btn ghost sm",onClick:async()=>{try{const e=await fetch(ce("/api/admin/themes"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"New Theme",light:{},dark:{darkMode:!0}})}),a=await e.json();null!==a&&void 0!==a&&a.id&&(await pe(),await ye(a.id))}catch(e){}},children:"New Theme"}),null!=R&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"btn ghost sm",onClick:()=>(async e=>{try{var a;const s=await fetch(ce("/api/admin/themes/".concat(e,"/clone")),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"".concat((null===(a=I.find(a=>a.id===e))||void 0===a?void 0:a.name)||"Theme"," Copy")})}),t=await s.json();null!==t&&void 0!==t&&t.id&&(await pe(),await ye(t.id))}catch(s){}})(R),children:"Clone"}),(0,r.jsx)("button",{className:"btn ghost sm",onClick:()=>(async e=>{try{await fetch(ce("/api/admin/themes/".concat(e)),{method:"DELETE"}),R===e&&W(null),await pe()}catch(a){}})(R),children:"Delete"})]})]})]}),(0,r.jsxs)("div",{className:"grid",style:{gridTemplateColumns:"220px 1fr",gap:12,marginTop:10},children:[(0,r.jsx)("div",{children:(0,r.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0},children:I.map(e=>(0,r.jsxs)("li",{onClick:()=>ye(e.id),style:{padding:"8px 6px",borderBottom:"1px solid #eee",cursor:"pointer",background:R===e.id?"#f5f5f5":void 0},children:[(0,r.jsx)("div",{style:{fontWeight:600},children:e.name}),(0,r.jsx)("div",{className:"small muted",children:e.description||"\u2014"})]},e.id))})}),(0,r.jsx)("div",{children:null==R?(0,r.jsx)("div",{className:"small muted",children:"Select a theme to edit and assign."}):(0,r.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,r.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,r.jsx)("input",{value:L,onChange:e=>M(e.target.value),placeholder:"Theme name",style:{flex:1,padding:8,borderRadius:6,border:"1px solid #e6e6e6"}}),(0,r.jsx)("button",{className:"btn sm",onClick:async()=>{if(null!=R)try{await fetch(ce("/api/admin/themes/".concat(R)),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:L,light:P,dark:B})}),await pe()}catch(e){}},children:"Save Theme"})]}),(0,r.jsxs)("div",{className:"grid",style:{gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,r.jsxs)("div",{className:"card",style:{padding:10},children:[(0,r.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"Light Variant"}),(0,r.jsxs)("label",{className:"small",children:["Primary",(0,r.jsx)("input",{value:(null===P||void 0===P||null===(s=P.colors)||void 0===s?void 0:s.primary)||"",onChange:e=>O(a=>(0,t.A)((0,t.A)({},a),{},{colors:(0,t.A)((0,t.A)({},a.colors||{}),{},{primary:e.target.value||void 0})})),style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #e6e6e6"}})]}),(0,r.jsxs)("label",{className:"small",children:["Accent",(0,r.jsx)("input",{value:(null===P||void 0===P||null===(o=P.colors)||void 0===o?void 0:o.accent)||"",onChange:e=>O(a=>(0,t.A)((0,t.A)({},a),{},{colors:(0,t.A)((0,t.A)({},a.colors||{}),{},{accent:e.target.value||void 0})})),style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #e6e6e6"}})]})]}),(0,r.jsxs)("div",{className:"card",style:{padding:10},children:[(0,r.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"Dark Variant"}),(0,r.jsxs)("label",{className:"small",style:{display:"flex",alignItems:"center",gap:6},children:[(0,r.jsx)("input",{type:"checkbox",checked:!!B.darkMode,onChange:e=>U(a=>(0,t.A)((0,t.A)({},a),{},{darkMode:e.target.checked}))})," Enable Dark Mode"]}),(0,r.jsxs)("label",{className:"small",children:["Primary",(0,r.jsx)("input",{value:(null===B||void 0===B||null===(c=B.colors)||void 0===c?void 0:c.primary)||"",onChange:e=>U(a=>(0,t.A)((0,t.A)({},a),{},{colors:(0,t.A)((0,t.A)({},a.colors||{}),{},{primary:e.target.value||void 0})})),style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #e6e6e6"}})]}),(0,r.jsxs)("label",{className:"small",children:["Accent",(0,r.jsx)("input",{value:(null===B||void 0===B||null===(m=B.colors)||void 0===m?void 0:m.accent)||"",onChange:e=>U(a=>(0,t.A)((0,t.A)({},a),{},{colors:(0,t.A)((0,t.A)({},a.colors||{}),{},{accent:e.target.value||void 0})})),style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #e6e6e6"}})]})]})]}),(0,r.jsxs)("div",{className:"card",style:{padding:10},children:[(0,r.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"Assign Theme"}),(0,r.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,r.jsx)("button",{className:"btn sm",onClick:()=>xe("tenant"),disabled:null==y,children:"Assign to Tenant"}),(0,r.jsxs)("select",{value:D,onChange:e=>F(e.target.value),style:{padding:8,borderRadius:6,border:"1px solid #e6e6e6"},children:[(0,r.jsx)("option",{value:"",children:"Select Module\u2026"}),v.map(e=>(0,r.jsx)("option",{value:e.name,children:e.title},e.name))]}),(0,r.jsx)("button",{className:"btn ghost sm",onClick:()=>xe("module"),disabled:!D,children:"Assign to Module"}),(0,r.jsx)("input",{value:J,onChange:e=>G(e.target.value),placeholder:"plugin-id",style:{padding:8,borderRadius:6,border:"1px solid #e6e6e6"}}),(0,r.jsx)("button",{className:"btn ghost sm",onClick:()=>xe("plugin"),disabled:!J,children:"Assign to Plugin"}),(0,r.jsx)("button",{className:"btn ghost sm",onClick:()=>xe("global"),children:"Assign as Global"})]})]})]})})]})]}),(0,r.jsxs)("div",{className:"card",style:{padding:12},children:[(0,r.jsx)("div",{style:{fontWeight:700,marginBottom:10},children:"Customization Requests"}),0===C.length?(0,r.jsx)("div",{className:"small muted",children:"No requests yet."}):(0,r.jsx)("div",{className:"grid",style:{gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:12},children:C.map(e=>(0,r.jsxs)("div",{className:"card",style:{padding:10},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)("div",{style:{fontWeight:700},children:[e.scope||"General"," ",(0,r.jsxs)("span",{className:"small muted",children:["\xb7 ",e.priority]})]}),(0,r.jsx)("div",{className:"badge not",children:e.status})]}),(0,r.jsx)("div",{className:"small",style:{marginTop:6},children:e.description}),(0,r.jsxs)("div",{className:"small muted",style:{marginTop:8},children:[e.contactName||e.contactEmail||"\u2014"," \xb7 ",new Date(e.createdAt).toLocaleString()]})]},e.id))})]})]})})]})]}):(0,r.jsx)("div",{className:"small muted",children:"Access denied"})}}}]);
//# sourceMappingURL=576.cfc989ab.chunk.js.map