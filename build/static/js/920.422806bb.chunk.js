"use strict";(self.webpackChunksunbeth_portal_react_ts=self.webpackChunksunbeth_portal_react_ts||[]).push([[920],{3920:(e,s,a)=>{a.r(s),a.d(s,{default:()=>i});var t=a(5043),r=a(579);const i=()=>{const[e,s]=(0,t.useState)(""),[a,i]=(0,t.useState)(""),[n,d]=(0,t.useState)(""),[l,o]=(0,t.useState)(""),[c,h]=(0,t.useState)(null),[p,m]=(0,t.useState)(!1),[u,g]=(0,t.useState)(!1);t.useEffect(()=>{const e=new URLSearchParams(window.location.search);s(e.get("email")||""),i(e.get("token")||"")},[]);return p?(0,r.jsx)("div",{className:"wrap centered",children:(0,r.jsx)("div",{className:"grid",style:{maxWidth:680,margin:"0 auto"},children:(0,r.jsx)("main",{children:(0,r.jsxs)("div",{className:"card",style:{padding:0,overflow:"hidden"},children:[(0,r.jsxs)("div",{style:{background:"linear-gradient(135deg, var(--primary) 0%, var(--primary-500, #0a6b55) 100%)",color:"#fff",padding:"18px 22px"},children:[(0,r.jsx)("div",{style:{fontWeight:800,fontSize:18},children:"Password Set"}),(0,r.jsx)("div",{className:"small",style:{opacity:.9},children:"You may now log in"})]}),(0,r.jsxs)("div",{style:{padding:18},children:[(0,r.jsx)("div",{children:"Your password has been set. You may now log in."}),(0,r.jsx)("a",{href:"/login",children:(0,r.jsx)("button",{className:"btn",style:{marginTop:16},children:"Go to Login"})})]})]})})})}):(0,r.jsx)("div",{className:"wrap centered",children:(0,r.jsx)("div",{className:"grid",style:{maxWidth:680,margin:"0 auto"},children:(0,r.jsx)("main",{children:(0,r.jsxs)("div",{className:"card",style:{padding:0,overflow:"hidden"},children:[(0,r.jsxs)("div",{style:{background:"linear-gradient(135deg, var(--primary) 0%, var(--primary-500, #0a6b55) 100%)",color:"#fff",padding:"18px 22px"},children:[(0,r.jsx)("div",{style:{fontWeight:800,fontSize:18},children:"Set Your Password"}),(0,r.jsx)("div",{className:"small",style:{opacity:.9},children:"Complete your onboarding to access Sunbeth"})]}),(0,r.jsxs)("div",{style:{padding:18},children:[(0,r.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),h(null),n===l){g(!0);try{const s=await fetch("/api/external-users/set-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,token:a,password:n})}),t=await s.json();if(!s.ok)throw new Error(t.error||"Failed to set password");m(!0)}catch(s){h(s.message||"Failed to set password")}finally{g(!1)}}else h("Passwords do not match")},children:[(0,r.jsx)("input",{type:"hidden",value:e}),(0,r.jsx)("input",{type:"hidden",value:a}),(0,r.jsx)("div",{style:{marginBottom:16},children:(0,r.jsx)("input",{type:"password",placeholder:"New password",value:n,onChange:e=>d(e.target.value),required:!0,minLength:8,className:"form-control"})}),(0,r.jsx)("div",{style:{marginBottom:16},children:(0,r.jsx)("input",{type:"password",placeholder:"Confirm password",value:l,onChange:e=>o(e.target.value),required:!0,minLength:8,className:"form-control"})}),c&&(0,r.jsx)("div",{className:"small",style:{color:"#b91c1c",background:"#fef2f2",border:"1px solid #fee2e2",padding:10,borderRadius:8,marginBottom:12},children:c}),(0,r.jsx)("button",{className:"btn",type:"submit",disabled:u,style:{width:"100%"},children:u?"Setting password...":"Set Password"})]}),(0,r.jsx)("div",{style:{marginTop:10},children:(0,r.jsx)("a",{href:"/login",children:"Back to login"})})]})]})})})})}}}]);
//# sourceMappingURL=920.422806bb.chunk.js.map