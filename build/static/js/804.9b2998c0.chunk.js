"use strict";(self.webpackChunksunbeth_portal_react_ts=self.webpackChunksunbeth_portal_react_ts||[]).push([[804],{2804:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var a=n(5043),i=n(3216),o=n(282),s=n(579);const r=()=>{const[e,t]=(0,a.useState)(""),[n,r]=(0,a.useState)(""),[l,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(!1),h=(0,i.Zp)(),{login:m}=((0,i.zy)(),(0,o.N)());return(0,s.jsxs)("div",{className:"container",style:{maxWidth:400,margin:"0 auto",padding:32},children:[(0,s.jsx)("h2",{children:"Sign In"}),(0,s.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),d(null),u(!0);try{if(e.endsWith("@yourcompany.com"))return void(window.location.href="/");const t=await fetch("/api/external-users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:n})}),a=await t.json();if(!t.ok)throw new Error(a.error||"Login failed");if(a.mfaRequired)return void h("/mfa?email=".concat(encodeURIComponent(e)));m({email:(null===a||void 0===a?void 0:a.email)||e,name:(null===a||void 0===a?void 0:a.name)||null}),h("/")}catch(t){d(t.message||"Login failed")}finally{u(!1)}},children:[(0,s.jsx)("div",{style:{marginBottom:16},children:(0,s.jsx)("input",{type:"email",placeholder:"Email address",value:e,onChange:e=>t(e.target.value),required:!0,style:{width:"100%",padding:8},autoFocus:!0})}),!e.endsWith("@yourcompany.com")&&(0,s.jsx)("div",{style:{marginBottom:16},children:(0,s.jsx)("input",{type:"password",placeholder:"Password",value:n,onChange:e=>r(e.target.value),required:!0,style:{width:"100%",padding:8}})}),l&&(0,s.jsx)("div",{style:{color:"red",marginBottom:12},children:l}),(0,s.jsx)("button",{className:"btn",type:"submit",disabled:c,style:{width:"100%"},children:c?"Signing in...":"Sign In"})]}),(0,s.jsx)("div",{style:{marginTop:16,textAlign:"center"},children:(0,s.jsx)("a",{href:"/forgot-password",children:"Forgot password?"})})]})}}}]);
//# sourceMappingURL=804.9b2998c0.chunk.js.map